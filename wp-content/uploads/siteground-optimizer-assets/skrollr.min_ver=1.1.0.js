/*!
 * skrollr core
 *
 * Alexander Prinzhorn - https://github.com/Prinzhorn/skrollr
 *
 * Free to use under terms of MIT license
 */(function(e,t,b){'use strict';var m={get:function(){return a},init:function(b){return a||new j(b)},VERSION:'0.6.30'},W=Object.prototype.hasOwnProperty,f=e.Math,Y=e.getComputedStyle,ap='touchstart',at='touchmove',ar='touchcancel',av='touchend',C='skrollable',T=C+'-before',S=C+'-between',R=C+'-after',w='skrollr',Z='no-'+w,am=w+'-desktop',ak=w+'-mobile',aj='linear',aU=1e3,aT=.004,aS='skrollr-body',aR=200,aQ='start',ai='end',au='center',ag='bottom',u='___skrollable_id',O=/^(?:input|textarea|button|select)$/i,aP=/^\s+|\s+$/g,aO=/^data(?:-(_\w+))?(?:-?(-?\d*\.?\d+p?))?(?:-?(start|end|top|center|bottom))?(?:-?(top|center|bottom))?$/,aN=/\s*(@?[\w\-\[\]]+)\s*:\s*(.+?)\s*(?:;|$)/gi,aM=/^(@?[a-z\-]+)\[(\w+)\]$/,af=/-([a-z0-9_])/g,_=function(b,a){return a.toUpperCase()},ad=/[\-+]?[\d]*\.?[\d]+/g,ab=/\{\?\}/g,aa=/rgba?\(\s*-?\d+\s*,\s*-?\d+\s*,\s*-?\d+/g,$=/[a-z\-]+-gradient/g,h='',x='',aL=function(){var b=/^(?:O|Moz|webkit|ms)|(?:-(?:o|moz|webkit|ms)-)/,c,a;if(!Y)return;c=Y(o,null);for(a in c)if(h=a.match(b)||+a==a&&c[a].match(b),h)break;if(!h){h=x='';return}h=h[0],h.slice(0,1)==='-'?(x=h,h={'-webkit-':'webkit','-moz-':'Moz','-ms-':'ms','-o-':'O'}[h]):x='-'+h.toLowerCase()+'-'},aK=function(){var a=e.requestAnimationFrame||e[h.toLowerCase()+'RequestAnimationFrame'],b=v();return(k||!a)&&(a=function(a){var c=v()-b,d=f.max(0,1e3/60-c);return e.setTimeout(function(){b=v(),a()},d)}),a},aJ=function(){var a=e.cancelAnimationFrame||e[h.toLowerCase()+'CancelAnimationFrame'];return(k||!a)&&(a=function(a){return e.clearTimeout(a)}),a},H={begin:function(){return 0},end:function(){return 1},linear:function(a){return a},quadratic:function(a){return a*a},cubic:function(a){return a*a*a},swing:function(a){return-f.cos(a*f.PI)/2+.5},sqrt:function(a){return f.sqrt(a)},outCubic:function(a){return f.pow(a-1,3)+1},bounce:function(b){var a;if(b<=.5083)a=3;else if(b<=.8489)a=9;else if(b<=.96208)a=27;else if(b<=.99981)a=91;else return 1;return 1-f.abs(3*f.cos(b*a*1.028)/a)}},o,d,aI,aV,aH,aG,aF,aE,aD,ac,aC,ae,K,aB,ah,aA,az,D,al,ay,ax,ao,p,aq,I,v,aw,a,i,l,n,y,g,P,L,G,q,s,U,V,X,F,c,M,J,r,z,N,Q,k,B,A,E,an;function j(b){var c,f;if(d=t.documentElement,o=t.body,aL(),a=this,b=b||{},L=b.constants||{},b.easing)for(c in b.easing)H[c]=b.easing[c];return Q=b.edgeStrategy||'set',n={beforerender:b.beforerender,render:b.render,keyframe:b.keyframe},y=b.forceHeight!==!1,y&&(P=b.scale||1),G=b.mobileDeceleration||aT,M=b.smoothScrolling!==!1,J=b.smoothScrollingDuration||aR,r={targetTop:a.getScrollTop()},k=(b.mobileCheck||function(){return/Android|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent||navigator.vendor||e.opera)})(),k?(l=t.getElementById(b.skrollrBody||aS),l&&aB(),aI(),p(d,[w,ak],[Z])):p(d,[w,am],[Z]),a.refresh(),ah(e,'resize orientationchange',function(){var a=d.clientWidth,b=d.clientHeight;(b!==X||a!==V)&&(X=b,V=a,F=!0)}),f=aK(),function a(){aG(),an=f(a)}(),a}j.prototype.refresh=function(f){var s=!1,l,g,c,r,q,A,z,y,n,D,e,j,d,x,v,h,B,o,m,k,w;for(f===b?(s=!0,i=[],N=0,f=t.getElementsByTagName('*')):f.length===b&&(f=[f]),g=0,l=f.length;g<l;g++){if(c=f[g],r=c,q=[],A=M,z=Q,y=!1,s&&u in c&&delete c[u],!c.attributes)continue;for(n=0,D=c.attributes.length;n<D;n++){if(e=c.attributes[n],e.name==='data-anchor-target'){if(r=t.querySelector(e.value),r===null)throw'Unable to find anchor target "'+e.value+'"';continue}if(e.name==='data-smooth-scrolling'){A=e.value!=='off';continue}if(e.name==='data-edge-strategy'){z=e.value;continue}if(e.name==='data-emit-events'){y=!0;continue}if(j=e.name.match(aO),j===null)continue;d={props:e.value,element:c,eventType:e.name.replace(af,_)},q.push(d),x=j[1],x&&(d.constant=x.substr(1)),v=j[2],/p$/.test(v)?(d.isPercentage=!0,d.offset=(v.slice(0,-1)|0)/100):d.offset=v|0,h=j[3],B=j[4]||h,!h||h===aQ||h===ai?(d.mode='absolute',h===ai?d.isEnd=!0:d.isPercentage||(d.offset=d.offset*P)):(d.mode='relative',d.anchors=[h,B])}if(!q.length)continue;!s&&u in c?(k=c[u],o=i[k].styleAttr,m=i[k].classAttr):(k=c[u]=N++,o=c.style.cssText,m=ao(c)),i[k]={element:c,styleAttr:o,classAttr:m,anchorTarget:r,keyFrames:q,smoothScrolling:A,edgeStrategy:z,emitEvents:y,lastFrameIndex:-1},p(c,[C],[])}for(al(),g=0,l=f.length;g<l;g++){if(w=i[f[g][u]],w===b)continue;aF(w),aD(w)}return a},j.prototype.relativeToAbsolute=function(i,f,g){var h=d.clientHeight,c=i.getBoundingClientRect(),b=c.top,e=c.bottom-c.top;return f===ag?b-=h:f===au&&(b-=h/2),g===ag?b+=e:g===au&&(b+=e/2),b+=a.getScrollTop(),b+.5|0},j.prototype.animateTo=function(h,d){var e,f,g;return d=d||{},e=v(),f=a.getScrollTop(),g=d.duration===b?aU:d.duration,c={startTop:f,topDiff:h-f,targetTop:h,duration:g,startTime:e,endTime:e+g,easing:H[d.easing||aj],done:d.done},c.topDiff||(c.done&&c.done.call(a,!1),c=b),a},j.prototype.stopAnimateTo=function(){c&&c.done&&c.done.call(a,!0),c=b},j.prototype.isAnimatingTo=function(){return!!c},j.prototype.isMobile=function(){return k},j.prototype.setScrollTop=function(b,c){return z=c===!0,k?B=f.min(f.max(b,0),g):e.scrollTo(0,b),a},j.prototype.getScrollTop=function(){return k?B:e.pageYOffset||d.scrollTop||o.scrollTop||0},j.prototype.getMaxScrollTop=function(){return g},j.prototype.on=function(b,c){return n[b]=c,a},j.prototype.off=function(b){return delete n[b],a},j.prototype.destroy=function(){var f=aJ(),e,h;for(f(an),az(),p(d,[Z],[w,am,ak]),e=0,h=i.length;e<h;e++)K(i[e].element);d.style.overflow=o.style.overflow='',d.style.height=o.style.height='',l&&m.setStyle(l,'transform','none'),a=b,l=b,n=b,y=b,g=0,P=1,L=b,G=b,q='down',s=-1,V=0,X=0,F=!1,c=b,M=b,J=b,r=b,z=b,N=0,Q=b,k=!1,B=0,A=b},aI=function(){var h,p,n,c,i,l,m,k,s,j,q,r;ah(d,[ap,at,ar,av].join(' '),function(d){var o=d.changedTouches[0],z,A,C,y,v,u,w,e,x;for(c=d.target;c.nodeType===3;)c=c.parentNode;switch(i=o.clientY,l=o.clientX,j=d.timeStamp,!O.test(c.tagName)&&d.pointerType==='mouse'&&d.preventDefault(),d.type){case ap:h&&h.blur(),a.stopAnimateTo(),h=c,p=m=i,n=l,s=j;break;case at:O.test(c.tagName)&&t.activeElement!==c&&d.preventDefault(),k=i-m,r=j-q,a.setScrollTop(B-k,!0),m=i,q=j;break;default:case ar:case av:if(z=p-i,A=n-l,C=A*A+z*z,C<49){O.test(h.tagName)||(h.focus(),y=t.createEvent('MouseEvents'),y.initMouseEvent('click',!0,!0,d.view,1,o.screenX,o.screenY,o.clientX,o.clientY,d.ctrlKey,d.altKey,d.shiftKey,d.metaKey,0,null),h.dispatchEvent(y));return}h=b,v=k/r,v=f.max(f.min(v,3),-3),u=f.abs(v/G),w=v*u+.5*G*u*u,e=a.getScrollTop()-w,x=0,e>g?(x=(g-e)/w,e=g):e<0&&(x=-e/w,e=0),u=u*(1-x),a.animateTo(e+.5|0,{easing:'outCubic',duration:u});break}},{passive:!0}),e.scrollTo(0,0),d.style.overflow=o.style.overflow='hidden'},aV=function(){for(var r=d.clientHeight,q=ay(),e=0,n=i.length,p,k,c,m,b,h,o,j,l;e<n;e++)for(h=i[e],o=h.element,p=h.anchorTarget,k=h.keyFrames,c=0,m=k.length;c<m;c++)b=k[c],j=b.offset,l=q[b.constant]||0,b.frame=j,b.isPercentage&&(j=j*r,b.frame=j),b.mode==='relative'&&(K(o),b.frame=a.relativeToAbsolute(p,b.anchors[0],b.anchors[1])-j,K(o,!0)),b.frame+=l,y&&!b.isEnd&&b.frame>g&&(g=b.frame);for(g=f.max(g,ax()),e=0,n=i.length;e<n;e++){for(h=i[e],k=h.keyFrames,c=0,m=k.length;c<m;c++)b=k[c],l=q[b.constant]||0,b.isEnd&&(b.frame=g-b.offset+l);h.keyFrames.sort(aw)}},aH=function(A,z){for(var k=0,y=i.length,b,c,h,e,u,l,n,j,x,w,s,t,a,f,r,d,g,o,v;k<y;k++){if(b=i[k],c=b.element,h=b.smoothScrolling?A:z,e=b.keyFrames,u=e.length,l=e[0],n=e[e.length-1],j=h<l.frame,x=h>n.frame,w=j?l:n,s=b.emitEvents,t=b.lastFrameIndex,j||x){if(j&&b.edge===-1||x&&b.edge===1)continue;switch(j?(p(c,[T],[R,S]),s&&t>-1&&(D(c,l.eventType,q),b.lastFrameIndex=-1)):(p(c,[R],[T,S]),s&&t<u&&(D(c,n.eventType,q),b.lastFrameIndex=u)),b.edge=j?-1:1,b.edgeStrategy){case'reset':K(c);continue;case'ease':h=w.frame;break;default:case'set':r=w.props;for(a in r)W.call(r,a)&&(f=ae(r[a].value),a.indexOf('@')===0?c.setAttribute(a.substr(1),f):m.setStyle(c,a,f));continue}}else b.edge!==0&&(p(c,[C,S],[T,R]),b.edge=0);for(d=0;d<u-1;d++)if(h>=e[d].frame&&h<=e[d+1].frame){g=e[d],o=e[d+1];for(a in g.props)W.call(g.props,a)&&(v=(h-g.frame)/(o.frame-g.frame),v=g.props[a].easing(v),f=aC(g.props[a].value,o.props[a].value,v),f=ae(f),a.indexOf('@')===0?c.setAttribute(a.substr(1),f):m.setStyle(c,a,f));s&&t!==d&&(q==='down'?D(c,g.eventType,q):D(c,o.eventType,q),b.lastFrameIndex=d);break}}},aG=function(){var d,h,e,f,j,i,o;F&&(F=!1,al()),d=a.getScrollTop(),e=v(),c?(e>=c.endTime?(d=c.targetTop,h=c.done,c=b):(f=c.easing((e-c.startTime)/c.duration),d=c.startTop+f*c.topDiff|0),a.setScrollTop(d,!0)):z||(j=r.targetTop-d,j&&(r={startTop:s,topDiff:d-s,targetTop:d,startTime:U,endTime:U+J}),e<=r.endTime&&(f=H.sqrt((e-r.startTime)/J),d=r.startTop+f*r.topDiff|0)),(z||s!==d)&&(q=d>s?'down':d<s?'up':q,z=!1,i={curTop:d,lastTop:s,maxTop:g,direction:q},o=n.beforerender&&n.beforerender.call(a,i),o!==!1&&(aH(d,a.getScrollTop()),k&&l&&m.setStyle(l,'transform','translate(0, '+-B+'px) '+A),s=d,n.render&&n.render.call(a,i)),h&&h.call(a,!1)),U=e},aF=function(g){for(var d=0,i=g.keyFrames.length,f,a,b,c,h,e;d<i;d++){for(f=g.keyFrames[d],h={};(e=aN.exec(f.props))!==null;)c=e[1],b=e[2],a=c.match(aM),a!==null?(c=a[1],a=a[2]):a=aj,b=b.indexOf('!')?aE(b):[b.slice(1)],h[c]={value:b,easing:H[a]};f.props=h}},aE=function(a){var b=[];return aa.lastIndex=0,a=a.replace(aa,function(a){return a.replace(ad,function(a){return a/255*100+'%'})}),x&&($.lastIndex=0,a=a.replace($,function(a){return x+a})),a=a.replace(ad,function(a){return b.push(+a),'{?}'}),b.unshift(a),b},aD=function(b){for(var c={},a=0,d=b.keyFrames.length;a<d;a++)ac(b.keyFrames[a],c);for(c={},a=b.keyFrames.length-1;a>=0;a--)ac(b.keyFrames[a],c)},ac=function(b,c){var a;for(a in c)W.call(b.props,a)||(b.props[a]=c[a]);for(a in b.props)c[a]=b.props[a]},aC=function(b,c,f){var d=b.length,a,e;if(d!==c.length)throw'Can\'t interpolate between "'+b[0]+'" and "'+c[0]+'"';for(e=[b[0]],a=1;a<d;a++)e[a]=b[a]+(c[a]-b[a])*f;return e},ae=function(a){var b=1;return ab.lastIndex=0,a[0].replace(ab,function(){return a[b++]})},K=function(c,f){var a,b,d,e;for(c=[].concat(c),d=0,e=c.length;d<e;d++){if(b=c[d],a=i[b[u]],!a)continue;f?(b.style.cssText=a.dirtyStyleAttr,p(b,a.dirtyClassAttr)):(a.dirtyStyleAttr=b.style.cssText,a.dirtyClassAttr=ao(b),b.style.cssText=a.styleAttr,p(b,a.classAttr))}},aB=function(){var a,b,c,d;A='translateZ(0)',m.setStyle(l,'transform',A),a=Y(l),b=a.getPropertyValue('transform'),c=a.getPropertyValue(x+'transform'),d=b&&b!=='none'||c&&c!=='none',d||(A='')},m.setStyle=function(d,a,b){var c=d.style;if(a=a.replace(af,_).replace('-',''),a==='zIndex')isNaN(b)?c[a]=b:c[a]=''+(b|0);else if(a==='float')c.styleFloat=c.cssFloat=b;else try{h&&(c[h+a.slice(0,1).toUpperCase()+a.slice(1)]=b),c[a]=b}catch(a){}},ah=m.addEvent=function(a,b,d){var g=function(a){return a=a||e.event,a.target||(a.target=a.srcElement),a.preventDefault||(a.preventDefault=function(){a.returnValue=!1,a.defaultPrevented=!0}),d.call(this,a)},c,f,h;for(b=b.split(' '),f=0,h=b.length;f<h;f++)c=b[f],a.addEventListener?a.addEventListener(c,d,!1):a.attachEvent('on'+c,g),E.push({element:a,name:c,listener:d})},aA=m.removeEvent=function(c,a,d){var b,e;for(a=a.split(' '),b=0,e=a.length;b<e;b++)c.removeEventListener?c.removeEventListener(a[b],d,!1):c.detachEvent('on'+a[b],d)},az=function(){for(var b=0,c=E.length,a;b<c;b++)a=E[b],aA(a.element,a.name,a.listener);E=[]},D=function(b,c,d){n.keyframe&&n.keyframe.call(a,b,c,d)},al=function(){var b=a.getScrollTop();g=0,y&&!k&&(o.style.height=''),aV(),y&&!k&&(o.style.height=g+d.clientHeight+'px'),k?a.setScrollTop(f.min(a.getScrollTop(),g)):a.setScrollTop(b,!0),z=!0},ay=function(){var f=d.clientHeight,e={},c,b;for(c in L)b=L[c],typeof b=='function'?b=b.call(a):/p$/.test(b)&&(b=b.slice(0,-1)/100*f),e[c]=b;return e},ax=function(){var a=0,b;return l&&(a=f.max(l.offsetHeight,l.scrollHeight)),b=f.max(a,o.scrollHeight,o.offsetHeight,d.scrollHeight,d.offsetHeight,d.clientHeight),b-d.clientHeight},ao=function(a){var b='className';return e.SVGElement&&a instanceof e.SVGElement&&(a=a[b],b='baseVal'),a[b]},p=function(c,f,h){var d='className',a,i,j,g,k;if(e.SVGElement&&c instanceof e.SVGElement&&(c=c[d],d='baseVal'),h===b){c[d]=f;return}for(a=c[d],i=0,j=h.length;i<j;i++)a=I(a).replace(I(h[i]),' ');for(a=aq(a),g=0,k=f.length;g<k;g++)I(a).indexOf(I(f[g]))===-1&&(a+=' '+f[g]);c[d]=aq(a)},aq=function(a){return a.replace(aP,'')},I=function(a){return' '+a+' '},v=Date.now||function(){return+new Date},aw=function(a,b){return a.frame-b.frame},g=0,P=1,q='down',s=-1,U=v(),V=0,X=0,F=!1,N=0,k=!1,B=0,E=[],typeof define=='function'&&define.amd?define([],function(){return m}):typeof module!='undefined'&&module.exports?module.exports=m:e.skrollr=m})(window,document)